<?xml version="1.0" encoding="UTF-8"?>

<nta>
  <declaration>chan response(), ready(), return(), thisFloorPeopleOut(), thisFloorPeopleIn(), prepareMove(), open(), close_return(), open_return(), timeout, close();clock x;</declaration>
  <template>
    <name x="30" y="30">2</name>
    <declaration/>
    <location init="false" finl="true" id="id0" x="1152" y="573">
      <name x="1122" y="543">NPW:building:Building</name>
      <moment startTime="0" endTime="75" timeDuration="null"/>
      <moment startTime="162" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id1" x="1428" y="435">
      <name x="1398" y="405">SPW:building:Building</name>
      <moment startTime="75" endTime="90" timeDuration="null"/>
      <moment startTime="127" endTime="129" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id2" x="876" y="300">
      <name x="846" y="270">WPI:building:Building</name>
      <moment startTime="90" endTime="127" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id3" x="876" y="573">
      <name x="846" y="543">WPOUT:building:Building</name>
      <moment startTime="129" endTime="162" timeDuration="null"/>
    </location>
    <location init="false" finl="true" id="id4" x="1152" y="798">
      <name x="1122" y="768">closed:door:Door</name>
      <moment startTime="0" endTime="39" timeDuration="null"/>
      <moment startTime="64" endTime="192" timeDuration="null"/>
      <moment startTime="217" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id5" x="1428" y="798">
      <name x="1398" y="768">moving:door:Door</name>
      <label kind="invariant" x="30" y="30">&lt;=25</label>
      <moment startTime="39" endTime="64" timeDuration="&lt;=25"/>
      <moment startTime="192" endTime="217" timeDuration="&lt;=25"/>
    </location>
    <location init="false" finl="false" id="id6" x="1704" y="1431">
      <name x="1674" y="1401">idle:elevator:Elevator</name>
      <moment startTime="0" endTime="12" timeDuration="null"/>
      <moment startTime="70" endTime="180" timeDuration="null"/>
      <moment startTime="227" endTime="255" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id7" x="876" y="1056">
      <name x="846" y="1026">working:elevator:Elevator</name>
      <label kind="invariant" x="30" y="30">&lt;=25</label>
      <moment startTime="12" endTime="37" timeDuration="&lt;=25"/>
      <moment startTime="66" endTime="70" timeDuration="null"/>
      <moment startTime="180" endTime="190" timeDuration="null"/>
      <moment startTime="220" endTime="227" timeDuration="null"/>
      <moment startTime="255" endTime="278" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id8" x="1704" y="933">
      <name x="1674" y="903">doorcontrol:elevator:Elevator</name>
      <moment startTime="37" endTime="66" timeDuration="null"/>
      <moment startTime="190" endTime="220" timeDuration="null"/>
    </location>
    <location init="false" finl="true" id="id9" x="1152" y="1071">
      <name x="1122" y="1041">going up:elevator:Elevator</name>
      <moment startTime="278" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="true" finl="false" id="id10" x="48" y="435">
      <name x="18" y="405">Idle:people:People</name>
      <moment startTime="0" endTime="3" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id11" x="324" y="435">
      <name x="294" y="405">waiting:people:People</name>
      <moment startTime="3" endTime="94" timeDuration="null"/>
      <moment startTime="124" endTime="130" timeDuration="null"/>
      <moment startTime="160" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id12" x="600" y="300">
      <name x="570" y="270">marching out:people:People</name>
      <label kind="invariant" x="30" y="30">&lt;=30</label>
      <moment startTime="94" endTime="124" timeDuration="&lt;=30"/>
    </location>
    <location init="false" finl="false" id="id13" x="600" y="573">
      <name x="570" y="543">marching in:people:People</name>
      <label kind="invariant" x="30" y="30">&lt;=30</label>
      <moment startTime="130" endTime="160" timeDuration="&lt;=30"/>
    </location>
    <location init="false" finl="true" id="id14" x="1428" y="1296">
      <name x="1398" y="1266">idle:timer:Timer</name>
      <moment startTime="0" endTime="10" timeDuration="null"/>
      <moment startTime="165" endTime="175" timeDuration="null"/>
      <moment startTime="230" endTime="250" timeDuration="null"/>
      <moment startTime="275" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id15" x="1152" y="1296">
      <name x="1122" y="1266">counting:timer:Timer</name>
      <label kind="invariant" x="30" y="30">&lt;=300</label>
      <moment startTime="10" endTime="165" timeDuration="&lt;=300"/>
      <moment startTime="175" endTime="230" timeDuration="null"/>
      <moment startTime="250" endTime="275" timeDuration="null"/>
    </location>
    <init ref="id10"/>
    <transition out="false">
      <source ref="id0"/>
      <target ref="id1"/>
      <label kind="synchronisation" x="1270" y="484" startTime="75" endTime="75" from="elevator:Elevator" to="building:Building" duration="null">ready()?</label>
    </transition>
    <transition out="false">
      <source ref="id2"/>
      <target ref="id1"/>
      <label kind="synchronisation" x="1132" y="347" startTime="127" endTime="127" from="people:People" to="building:Building" duration="null">ready()?</label>
    </transition>
    <transition out="false">
      <source ref="id3"/>
      <target ref="id0"/>
      <label kind="synchronisation" x="994" y="553" startTime="162" endTime="162" from="people:People" to="building:Building" duration="null">return()?</label>
    </transition>
    <transition out="false">
      <source ref="id4"/>
      <target ref="id5"/>
      <label kind="synchronisation" x="1270" y="778" startTime="39" endTime="39" from="elevator:Elevator" to="door:Door" duration="null">open()?</label>
    </transition>
    <transition out="false">
      <source ref="id4"/>
      <target ref="id5"/>
      <label kind="synchronisation" x="1290" y="818" startTime="192" endTime="192" from="elevator:Elevator" to="door:Door" duration="null">close()?</label>
      <nail y="818" x="1290"/>
    </transition>
    <transition out="false">
      <source ref="id5"/>
      <target ref="id4"/>
      <label kind="none" x="1290" y="778" startTime="217" endTime="217" duration="null">null</label>
      <nail y="778" x="1290"/>
    </transition>
    <transition out="false">
      <source ref="id6"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="1270" y="1223" startTime="12" endTime="12" from="timer:Timer" to="elevator:Elevator" duration="null">response()?</label>
    </transition>
    <transition out="false">
      <source ref="id8"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="1270" y="974" startTime="66" endTime="66" from="door:Door" to="elevator:Elevator" duration="null">open_return()?</label>
    </transition>
    <transition out="false">
      <source ref="id6"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="1270" y="1223" startTime="180" endTime="180" from="timer:Timer" to="elevator:Elevator" duration="null">ready()?</label>
    </transition>
    <transition out="false">
      <source ref="id8"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="1270" y="974" startTime="220" endTime="220" from="door:Door" to="elevator:Elevator" duration="null">close_return()?</label>
    </transition>
    <transition out="false">
      <source ref="id6"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="1270" y="1223" startTime="255" endTime="255" from="timer:Timer" to="elevator:Elevator" duration="null">prepareMove()?</label>
    </transition>
    <transition out="false">
      <source ref="id7"/>
      <target ref="id9"/>
      <label kind="synchronisation" x="994" y="1043" startTime="278" endTime="278" from="timer:Timer" to="elevator:Elevator" duration="null">timeout?</label>
    </transition>
    <transition out="false">
      <source ref="id10"/>
      <target ref="id11"/>
      <label kind="none" x="166" y="415" startTime="3" endTime="3" duration="null">null</label>
    </transition>
    <transition out="false">
      <source ref="id11"/>
      <target ref="id12"/>
      <label kind="synchronisation" x="462" y="455" startTime="94" endTime="94" from="building:Building" to="people:People" duration="null">thisFloorPeopleOut()?</label>
      <nail y="455" x="462"/>
    </transition>
    <transition out="false">
      <source ref="id12"/>
      <target ref="id11"/>
      <label kind="none" x="462" y="280" startTime="124" endTime="124" duration="null">null</label>
      <nail y="280" x="462"/>
    </transition>
    <transition out="false">
      <source ref="id11"/>
      <target ref="id13"/>
      <label kind="synchronisation" x="442" y="484" startTime="130" endTime="130" from="building:Building" to="people:People" duration="null">thisFloorPeopleIn()?</label>
    </transition>
    <transition out="false">
      <source ref="id15"/>
      <target ref="id14"/>
      <label kind="none" x="1270" y="1276" startTime="165" endTime="165" duration="null">null</label>
    </transition>
    <transition out="false">
      <source ref="id15"/>
      <target ref="id14"/>
      <label kind="synchronisation" x="1270" y="1276" startTime="230" endTime="230" from="elevator:Elevator" to="timer:Timer" duration="null">ready()?</label>
    </transition>
    <transition out="true">
      <source ref="id1"/>
      <target ref="id11"/>
      <label kind="synchronisation" x="856" y="415" startTime="90" endTime="94" from="building:Building" to="people:People" duration="null">thisFloorPeopleOut()</label>
    </transition>
    <transition out="true">
      <source ref="id1"/>
      <target ref="id11"/>
      <label kind="synchronisation" x="856" y="415" startTime="129" endTime="130" from="building:Building" to="people:People" duration="null">thisFloorPeopleIn()</label>
    </transition>
    <transition out="true">
      <source ref="id5"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="1546" y="845" startTime="64" endTime="66" from="door:Door" to="elevator:Elevator" duration="null">open_return()</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id4"/>
      <label kind="synchronisation" x="994" y="907" startTime="37" endTime="39" from="elevator:Elevator" to="door:Door" duration="null">open()</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id0"/>
      <label kind="synchronisation" x="994" y="794" startTime="70" endTime="75" from="elevator:Elevator" to="building:Building" duration="null">ready()</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id4"/>
      <label kind="synchronisation" x="994" y="907" startTime="190" endTime="192" from="elevator:Elevator" to="door:Door" duration="null">close()</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id15"/>
      <label kind="synchronisation" x="1014" y="1076" startTime="227" endTime="230" from="elevator:Elevator" to="timer:Timer" duration="null">ready()</label>
      <nail y="1076" x="1014"/>
    </transition>
    <transition out="true">
      <source ref="id13"/>
      <target ref="id3"/>
      <label kind="synchronisation" x="718" y="553" startTime="160" endTime="162" from="people:People" to="building:Building" duration="null">return()</label>
    </transition>
    <transition out="true">
      <source ref="id14"/>
      <target ref="id6"/>
      <label kind="synchronisation" x="1546" y="1343" startTime="10" endTime="12" from="timer:Timer" to="elevator:Elevator" duration="null">response()</label>
    </transition>
    <transition out="true">
      <source ref="id14"/>
      <target ref="id6"/>
      <label kind="synchronisation" x="1546" y="1343" startTime="175" endTime="180" from="timer:Timer" to="elevator:Elevator" duration="null">ready()</label>
    </transition>
    <transition out="true">
      <source ref="id14"/>
      <target ref="id6"/>
      <label kind="synchronisation" x="1546" y="1343" startTime="250" endTime="255" from="timer:Timer" to="elevator:Elevator" duration="null">prepareMove()</label>
    </transition>
    <transition out="true">
      <source ref="id15"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="1014" y="1276" startTime="275" endTime="278" from="timer:Timer" to="elevator:Elevator" duration="null">timeout</label>
      <nail y="1276" x="1014"/>
    </transition>
    <transition out="true">
      <source ref="id12"/>
      <target ref="id2"/>
      <label kind="synchronisation" x="718" y="280" startTime="123" endTime="127" from="people:People" to="building:Building" duration="null">ready()|null</label>
    </transition>
    <transition out="true">
      <source ref="id5"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="1546" y="845" startTime="216" endTime="220" from="door:Door" to="elevator:Elevator" duration="null">close_return()|null</label>
    </transition>
  </template>
  <temp>
    <name x="31" y="31">door:Door</name>
    <declaration/>
    <location init="false" finl="true" id="id4" x="31" y="31">
      <name x="31" y="31">closed:door:Door</name>
      <moment startTime="0" endTime="39" timeDuration="null"/>
      <moment startTime="64" endTime="192" timeDuration="null"/>
      <moment startTime="217" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id5" x="31" y="31">
      <name x="31" y="31">moving:door:Door</name>
      <label kind="invariant" x="31" y="31">&lt;=25</label>
      <moment startTime="39" endTime="64" timeDuration="&lt;=25"/>
      <moment startTime="192" endTime="217" timeDuration="&lt;=25"/>
    </location>
    <init ref="id-1"/>
    <transition out="false">
      <source ref="id4"/>
      <target ref="id5"/>
      <label kind="synchronisation" x="31" y="31" startTime="39" endTime="39" from="elevator:Elevator" to="door:Door" duration="null">open()?</label>
    </transition>
    <transition out="true">
      <source ref="id5"/>
      <target ref="id4"/>
      <label kind="synchronisation" x="31" y="31" startTime="64" endTime="66" from="door:Door" to="elevator:Elevator" duration="null">open_return()!</label>
    </transition>
    <transition out="false">
      <source ref="id4"/>
      <target ref="id5"/>
      <label kind="synchronisation" x="31" y="31" startTime="192" endTime="192" from="elevator:Elevator" to="door:Door" duration="null">close()?</label>
    </transition>
    <transition out="false">
      <source ref="id5"/>
      <target ref="id4"/>
      <label kind="none" x="31" y="31" startTime="217" endTime="217" duration="null">null</label>
    </transition>
  </temp>
  <temp>
    <name x="32" y="32">elevator:Elevator</name>
    <declaration/>
    <location init="false" finl="false" id="id6" x="32" y="32">
      <name x="32" y="32">idle:elevator:Elevator</name>
      <moment startTime="0" endTime="12" timeDuration="null"/>
      <moment startTime="70" endTime="180" timeDuration="null"/>
      <moment startTime="227" endTime="255" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id7" x="32" y="32">
      <name x="32" y="32">working:elevator:Elevator</name>
      <label kind="invariant" x="32" y="32">&lt;=25</label>
      <moment startTime="12" endTime="37" timeDuration="&lt;=25"/>
      <moment startTime="66" endTime="70" timeDuration="null"/>
      <moment startTime="180" endTime="190" timeDuration="null"/>
      <moment startTime="220" endTime="227" timeDuration="null"/>
      <moment startTime="255" endTime="278" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id8" x="32" y="32">
      <name x="32" y="32">doorcontrol:elevator:Elevator</name>
      <moment startTime="37" endTime="66" timeDuration="null"/>
      <moment startTime="190" endTime="220" timeDuration="null"/>
    </location>
    <location init="false" finl="true" id="id9" x="32" y="32">
      <name x="32" y="32">going up:elevator:Elevator</name>
      <moment startTime="278" endTime="2147483647" timeDuration="null"/>
    </location>
    <init ref="id-1"/>
    <transition out="false">
      <source ref="id6"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="32" y="32" startTime="12" endTime="12" from="timer:Timer" to="elevator:Elevator" duration="null">response()?</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="32" y="32" startTime="37" endTime="39" from="elevator:Elevator" to="door:Door" duration="null">open()!</label>
    </transition>
    <transition out="false">
      <source ref="id8"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="32" y="32" startTime="66" endTime="66" from="door:Door" to="elevator:Elevator" duration="null">open_return()?</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id6"/>
      <label kind="synchronisation" x="32" y="32" startTime="70" endTime="75" from="elevator:Elevator" to="building:Building" duration="null">ready()!</label>
    </transition>
    <transition out="false">
      <source ref="id6"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="32" y="32" startTime="180" endTime="180" from="timer:Timer" to="elevator:Elevator" duration="null">ready()?</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id8"/>
      <label kind="synchronisation" x="32" y="32" startTime="190" endTime="192" from="elevator:Elevator" to="door:Door" duration="null">close()!</label>
    </transition>
    <transition out="false">
      <source ref="id8"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="32" y="32" startTime="220" endTime="220" from="door:Door" to="elevator:Elevator" duration="null">close_return()?</label>
    </transition>
    <transition out="true">
      <source ref="id7"/>
      <target ref="id6"/>
      <label kind="synchronisation" x="32" y="32" startTime="227" endTime="230" from="elevator:Elevator" to="timer:Timer" duration="null">ready()!</label>
    </transition>
    <transition out="false">
      <source ref="id6"/>
      <target ref="id7"/>
      <label kind="synchronisation" x="32" y="32" startTime="255" endTime="255" from="timer:Timer" to="elevator:Elevator" duration="null">prepareMove()?</label>
    </transition>
    <transition out="false">
      <source ref="id7"/>
      <target ref="id9"/>
      <label kind="synchronisation" x="32" y="32" startTime="278" endTime="278" from="timer:Timer" to="elevator:Elevator" duration="null">timeout?</label>
    </transition>
  </temp>
  <temp>
    <name x="33" y="33">people:People</name>
    <declaration/>
    <location init="true" finl="false" id="id10" x="33" y="33">
      <name x="33" y="33">Idle:people:People</name>
      <moment startTime="0" endTime="3" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id11" x="33" y="33">
      <name x="33" y="33">waiting:people:People</name>
      <moment startTime="3" endTime="94" timeDuration="null"/>
      <moment startTime="124" endTime="130" timeDuration="null"/>
      <moment startTime="160" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id12" x="33" y="33">
      <name x="33" y="33">marching out:people:People</name>
      <label kind="invariant" x="33" y="33">&lt;=30</label>
      <moment startTime="94" endTime="124" timeDuration="&lt;=30"/>
    </location>
    <location init="false" finl="false" id="id13" x="33" y="33">
      <name x="33" y="33">marching in:people:People</name>
      <label kind="invariant" x="33" y="33">&lt;=30</label>
      <moment startTime="130" endTime="160" timeDuration="&lt;=30"/>
    </location>
    <init ref="id10"/>
    <transition out="false">
      <source ref="id10"/>
      <target ref="id11"/>
      <label kind="none" x="33" y="33" startTime="3" endTime="3" duration="null">null</label>
    </transition>
    <transition out="false">
      <source ref="id11"/>
      <target ref="id12"/>
      <label kind="synchronisation" x="33" y="33" startTime="94" endTime="94" from="building:Building" to="people:People" duration="null">thisFloorPeopleOut()?</label>
    </transition>
    <transition out="false">
      <source ref="id12"/>
      <target ref="id11"/>
      <label kind="none" x="33" y="33" startTime="124" endTime="124" duration="null">null</label>
    </transition>
    <transition out="false">
      <source ref="id11"/>
      <target ref="id13"/>
      <label kind="synchronisation" x="33" y="33" startTime="130" endTime="130" from="building:Building" to="people:People" duration="null">thisFloorPeopleIn()?</label>
    </transition>
    <transition out="true">
      <source ref="id13"/>
      <target ref="id11"/>
      <label kind="synchronisation" x="33" y="33" startTime="160" endTime="162" from="people:People" to="building:Building" duration="null">return()!</label>
    </transition>
  </temp>
  <temp>
    <name x="34" y="34">timer:Timer</name>
    <declaration/>
    <location init="false" finl="true" id="id14" x="34" y="34">
      <name x="34" y="34">idle:timer:Timer</name>
      <moment startTime="0" endTime="10" timeDuration="null"/>
      <moment startTime="165" endTime="175" timeDuration="null"/>
      <moment startTime="230" endTime="250" timeDuration="null"/>
      <moment startTime="275" endTime="2147483647" timeDuration="null"/>
    </location>
    <location init="false" finl="false" id="id15" x="34" y="34">
      <name x="34" y="34">counting:timer:Timer</name>
      <label kind="invariant" x="34" y="34">&lt;=300</label>
      <moment startTime="10" endTime="165" timeDuration="&lt;=300"/>
      <moment startTime="175" endTime="230" timeDuration="null"/>
      <moment startTime="250" endTime="275" timeDuration="null"/>
    </location>
    <init ref="id-1"/>
    <transition out="true">
      <source ref="id14"/>
      <target ref="id15"/>
      <label kind="synchronisation" x="34" y="34" startTime="10" endTime="12" from="timer:Timer" to="elevator:Elevator" duration="null">response()!</label>
    </transition>
    <transition out="false">
      <source ref="id15"/>
      <target ref="id14"/>
      <label kind="none" x="34" y="34" startTime="165" endTime="165" duration="null">null</label>
    </transition>
    <transition out="true">
      <source ref="id14"/>
      <target ref="id15"/>
      <label kind="synchronisation" x="34" y="34" startTime="175" endTime="180" from="timer:Timer" to="elevator:Elevator" duration="null">ready()!</label>
    </transition>
    <transition out="false">
      <source ref="id15"/>
      <target ref="id14"/>
      <label kind="synchronisation" x="34" y="34" startTime="230" endTime="230" from="elevator:Elevator" to="timer:Timer" duration="null">ready()?</label>
    </transition>
    <transition out="true">
      <source ref="id14"/>
      <target ref="id15"/>
      <label kind="synchronisation" x="34" y="34" startTime="250" endTime="255" from="timer:Timer" to="elevator:Elevator" duration="null">prepareMove()!</label>
    </transition>
    <transition out="true">
      <source ref="id15"/>
      <target ref="id14"/>
      <label kind="synchronisation" x="34" y="34" startTime="275" endTime="278" from="timer:Timer" to="elevator:Elevator" duration="null">timeout!</label>
    </transition>
  </temp>
  <system>system people:People, door:Door, building:Building, timer:Timer, elevator:Elevator;</system>
</nta>
